{"version":3,"sources":["api/api.js","scripts/_select.js","scripts/_button-set-gallery.js","scripts/_card-animation.js","scripts/_scroll-animation.js","scripts/_set-year.js","scripts/main.js"],"names":["BASE_URL","getData","groups","response","fetch","ok","Error","statusText","vacancies","json","error","teamSelect","document","querySelector","locationSelect","basicTeamOption","basicLocationOption","list","teams","filteredTeams","locations","createGroups","category","forEach","vacancy","group","categories","countGroupedVacancies","select","set","Object","keys","optionsList","firstElementChild","id","innerHTML","value","option","createElement","length","classList","add","contains","textContent","append","setBasicOption","basicOption","wrapper","closest","options","querySelectorAll","text","textCut","split","find","opt","includes","chooseTeam","chooseLocation","toggleSelect","func","selectPurpose","addEventListener","event","target","toggle","remove","team","renderVacancies","teamText","key","filter","location","vacanciesToShow","noVacancies","row","insertAdjacentHTML","applyUrl","renderError","startApplication","gallery","buttons","photos","addListenerForGalleryButtons","button","changeGalleryPhotos","photo","dataset","index","addCardAnimation","cards","updateStyles","card","offsetWidth","offsetHeight","left","top","getBoundingClientRect","itemLeft","window","scrollX","itemTop","scrollY","size","Math","sqrt","style","setProperty","overlayX","round","pageX","overlayY","pageY","addScrollAnimation","animItem","createObserver","root","rootMargin","threshold","innerHeight","IntersectionObserver","callback","entries","observer","entry","isIntersecting","elements","delayValue","element","unobserve","observe","setCurrentYear","Date","getFullYear"],"mappings":"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","file":"main.b9b16d25.js","sourceRoot":"../src","sourcesContent":["/* eslint-disable no-undef */\nconst BASE_URL = 'https://api.lever.co/v0/postings/preply?mode=json';\n\nexport async function getData(groups) {\n  try {\n    const response = await fetch(BASE_URL);\n\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n\n    const vacancies = await response.json();\n\n    return vacancies;\n  } catch (error) {\n    throw new Error(error);\n  }\n}\n","import { getData } from '../api/api';\n\nconst teamSelect = document.querySelector('.js-team');\nconst locationSelect = document.querySelector('.js-location');\nconst basicTeamOption = teamSelect.querySelector('.js-select');\nconst basicLocationOption = locationSelect.querySelector('.js-select');\nconst list = document.querySelector('.js-list');\nconst teams = {};\nlet filteredTeams;\nconst locations = {};\n\nfunction createGroups(vacancies, groups, category) {\n  vacancies.forEach(vacancy => {\n    const group = vacancy.categories[category];\n\n    if (groups[group]) {\n      groups[group] = [\n        ...groups[group],\n        vacancy,\n      ];\n    } else {\n      groups[group] = [vacancy];\n    }\n  });\n}\n\nfunction countGroupedVacancies(select, groups) {\n  const set = Object.keys(groups);\n  const optionsList = select.querySelector('.js-options');\n\n  if (optionsList.firstElementChild\n    && optionsList.firstElementChild.id !== 'all') {\n    optionsList.innerHTML = '';\n  }\n\n  for (const value of set) {\n    const option = document.createElement('li');\n    const length = groups[value].length;\n\n    option.classList.add('js-option');\n    option.classList.add('select__option');\n\n    if (select.classList.contains('js-team')) {\n      option.textContent = `${value} (${length})`;\n    } else {\n      option.textContent = value;\n    }\n\n    optionsList.append(option);\n  }\n\n  setBasicOption(basicTeamOption);\n}\n\nfunction setBasicOption(basicOption) {\n  const wrapper = basicOption.closest('.js-group');\n  const options = wrapper.querySelectorAll('.js-option');\n  const option = options[0];\n  const text = option.textContent;\n\n  if (basicOption.textContent) {\n    const textCut = basicOption.textContent.split(' (')[0];\n\n    basicOption.textContent = [...options].find((opt) => {\n      return opt.textContent.includes(textCut);\n    }).textContent;\n\n    return;\n  }\n\n  basicOption.textContent = text;\n\n  if (wrapper.classList.contains('js-team')) {\n    chooseTeam(option, basicOption);\n  } else {\n    chooseLocation(option, basicOption);\n  }\n}\n\nfunction toggleSelect(select, func, basicOption, selectPurpose) {\n  select.addEventListener('click', (event) => {\n    const { target } = event;\n\n    if (target.classList.contains('js-option')) {\n      func(target, basicOption);\n    }\n\n    basicOption.classList.toggle('select__basic-option--open');\n  });\n\n  document.addEventListener('click', (event) => {\n    const { target } = event;\n\n    if (!basicOption.classList.contains('select__basic-option--open')) {\n      return;\n    }\n\n    if (!target.closest(`.js-${selectPurpose}`)) {\n      basicOption.classList.remove('select__basic-option--open');\n    }\n  });\n}\n\nfunction chooseTeam(target, basicOption) {\n  const text = target.textContent;\n  const team = text.split(' (')[0];\n\n  basicOption.textContent = text;\n\n  renderVacancies(team);\n}\n\nfunction chooseLocation(target, basicOption) {\n  const text = target.textContent;\n  const teamText = basicTeamOption.textContent.split(' (')[0];\n\n  if (target.id !== 'all') {\n    for (const key in teams) {\n      filteredTeams[key] = [...teams[key]].filter((vacancy) => {\n        return vacancy.categories.location === text;\n      });\n    }\n  } else {\n    filteredTeams = { ...teams };\n  }\n\n  countGroupedVacancies(teamSelect, filteredTeams);\n  basicOption.textContent = text;\n  renderVacancies(teamText);\n}\n\nfunction renderVacancies(text) {\n  list.innerHTML = '';\n\n  const vacanciesToShow = filteredTeams[text];\n\n  if (!vacanciesToShow || vacanciesToShow.length === 0) {\n    const noVacancies = document.createElement('p');\n\n    noVacancies.textContent = 'Your dream position is not opened yet';\n    list.append(noVacancies);\n\n    return;\n  }\n\n  vacanciesToShow.forEach(vacancy => {\n    const row = document.createElement('tr');\n\n    row.classList.add('vacancies__item');\n\n    row.insertAdjacentHTML('beforeend', `\n      <td class=\"vacancies__info\">\n        <div class=\"vacancies__position\">${vacancy.text}</div>\n        <div class=\"vacancies__location\">${vacancy.categories.location}</div>\n      </td>\n      <td class=\"vacancies__apply\">\n        <a href=\"${vacancy.applyUrl}\" class=\"vacancies__link\">Apply</a>\n        <a href=\"${vacancy.applyUrl}\" class=\"vacancies__arrow\"></a>\n      </td>\n    `);\n\n    list.append(row);\n  });\n}\n\nfunction renderError() {\n  const vacanciesSection = document.querySelector('.vacancies');\n\n  vacanciesSection.innerHTML = `\n    <div>\n      <p class=\"vacancies__error\">\n        Can't load the vacancies. Try to reload the page.\n      </p>\n    </div>\n  `;\n}\n\nexport async function startApplication() {\n  try {\n    const vacancies = await getData();\n\n    createGroups(vacancies, teams, 'team');\n    createGroups(vacancies, locations, 'location');\n    filteredTeams = { ...teams };\n\n    countGroupedVacancies(teamSelect, teams);\n    countGroupedVacancies(locationSelect, locations);\n    setBasicOption(basicLocationOption);\n\n    toggleSelect(\n      locationSelect,\n      chooseLocation,\n      basicLocationOption,\n      'location'\n    );\n\n    toggleSelect(teamSelect, chooseTeam, basicTeamOption, 'team');\n  } catch (error) {\n    renderError();\n  }\n}\n","const gallery = document.querySelector('.js-gallery');\nconst buttons = gallery.querySelectorAll('.js-gallery-button');\nconst photos = gallery.querySelectorAll('.js-gallery-photo');\n\nexport function addListenerForGalleryButtons() {\n  [...buttons].forEach(button => {\n    button.addEventListener('click', changeGalleryPhotos);\n  });\n};\n\nfunction changeGalleryPhotos({ target }) {\n  [...buttons].forEach(button => {\n    button.classList.remove('gallery__button--active');\n  });\n\n  target.classList.add('gallery__button--active');\n\n  [...photos].forEach(photo => {\n    photo.classList.remove('gallery__photo--show');\n\n    if (target.dataset.index === photo.dataset.index) {\n      photo.classList.add('gallery__photo--show');\n    }\n  });\n};\n","export function addCardAnimation() {\n  const cards = document.querySelectorAll('[data-hover=\"card\"]');\n\n  const updateStyles = (event, card) => {\n    const { offsetWidth, offsetHeight } = card;\n    const { left, top } = card.getBoundingClientRect();\n    const itemLeft = left + window.scrollX;\n    const itemTop = top + window.scrollY;\n    const size = Math.sqrt((offsetWidth ** 2) + (offsetHeight ** 2));\n\n    card.style.setProperty('--width', `${size}px`);\n    card.style.setProperty('--height', `${size}px`);\n\n    const overlayX = Math.round(event.pageX - itemLeft) - (size / 2);\n    const overlayY = Math.round(event.pageY - itemTop) - (size / 2);\n\n    card.style.setProperty('--top', `${overlayY}px`);\n    card.style.setProperty('--left', `${overlayX}px`);\n  };\n\n  cards.forEach(card => {\n    card.addEventListener('mouseenter', (event) => {\n      card.classList.add('active');\n      updateStyles(event, card);\n    });\n  });\n\n  cards.forEach(card => {\n    card.addEventListener('mouseleave', (event) => {\n      card.classList.remove('active');\n      updateStyles(event, card);\n    });\n  });\n}\n","export function addScrollAnimation() {\n  const animItems = document.querySelectorAll('.js-scroll');\n\n  animItems.forEach(animItem => {\n    createObserver(animItem);\n  });\n};\n\nfunction createObserver(target) {\n  const options = {\n    root: null,\n    rootMargin: '0px',\n    threshold: target.offsetHeight < window.innerHeight ? 0.4 : 0.2,\n  };\n\n  // eslint-disable-next-line no-undef\n  const intObserver = new IntersectionObserver(callback, options);\n\n  function callback(entries, observer) {\n    entries.forEach(entry => {\n      if (!entry.isIntersecting) {\n        return;\n      }\n\n      if (entry.target.classList.contains('js-background')) {\n        entry.target.classList.add('slogan--active');\n      }\n\n      const elements = entry.target.querySelectorAll('.js-scroll__element');\n      let delayValue = 0;\n\n      elements.forEach(element => {\n        element.style['transition-delay'] = `${delayValue += 0.15}s`;\n        element.classList.add('scroll--active');\n      });\n\n      observer.unobserve(entry.target);\n    });\n  }\n\n  intObserver.observe(target);\n}\n","export const setCurrentYear = () => {\n  document.querySelector('.js-year').textContent = (new Date()).getFullYear();\n};\n","'use strict';\n\nimport { startApplication } from './_select';\nimport { addListenerForGalleryButtons } from './_button-set-gallery';\nimport { addCardAnimation } from './_card-animation';\nimport { addScrollAnimation } from './_scroll-animation';\nimport { setCurrentYear } from './_set-year';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  addListenerForGalleryButtons();\n  addScrollAnimation();\n  setCurrentYear();\n  addCardAnimation();\n  startApplication();\n});\n"]}